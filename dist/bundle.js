(()=>{let e=new Image,t="",a=document.getElementById("button_container"),n=document.createElement("button"),s=document.createElement("button"),c=!1,i=document.createElement("button"),d=document.getElementById("filtered_canvas"),l=d.getContext("2d"),o=document.createElement("video");async function r(){l.drawImage(o,0,0,1280,720),"grayscale"===t&&(d.classList.contains("grayscale")||d.classList.add("grayscale"),c&&l.drawImage(e,150,200,250,400)),"ar_sticker"===t&&l.drawImage(e,150,200,250,400),"original"===t&&d.classList.contains("grayscale")&&d.classList.remove("grayscale"),requestAnimationFrame(r)}n.classList.add("btn"),n.classList.add("btn-success"),n.classList.add("custom_btn_length"),n.innerText="Grayscale",n.addEventListener("click",(function(){t="grayscale",console.log("switch to grayscale")})),s.classList.add("btn"),s.classList.add("btn-info"),s.classList.add("custom_btn_length"),s.innerText="AR Sticker",s.addEventListener("click",(function(){t="ar_sticker",c=!0,console.log("switch to ar sticker")})),i.classList.add("btn"),i.classList.add("btn-primary"),i.classList.add("custom_btn_length"),i.innerText="Remove Filters",i.addEventListener("click",(function(){t="original",c=!1,console.log("remove all filters")})),a.appendChild(n),a.appendChild(s),a.appendChild(i),Promise.all([e.src="img/duck2.png"]).then((function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}}}).then((e=>{o.srcObject=e,o.muted=!0,o.play(),r()}))}))})();